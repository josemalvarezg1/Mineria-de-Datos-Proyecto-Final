<html>

  <head>

    <meta charset="utf-8">
    <script src="shared/jquery.js" type="text/javascript"></script>
    <script src="shared/shiny.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <title>Proyecto Minería de Datos — 25038805_20615639</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css"/> 

    <script type="text/javascript">

      var tags = [];
      Shiny.addCustomMessageHandler("data", function(message) {

          tags = (message);

          var uniqueTags = [];
          $.each(tags, function(i, el){
              if($.inArray(el, uniqueTags) === -1) uniqueTags.push(el);
          });

          $( "#nameMovie" ).autocomplete({

            maxResults: 5,
            source: function(request, response) {

              var results = $.ui.autocomplete.filter(uniqueTags, request.term);
              response(results.slice(0, this.options.maxResults));

            },
            minLength: 1,
            autoFocus: true,
            select: function() {

              $("#sugerir").removeAttr("disabled");

            }

          });

      });

      $( document ).ready(function() {
        
        $("#annos").hide();

        $("#button-rules").click(function(){

          $("#rules").fadeToggle("slow");

        });

        $("#selFilter").change(function() {

          if ($('#selFilter').find(":selected").text() == "Título") {

            $("#annos").hide();
            $("#names").show();
            $("#sugerir").attr("disabled", true);
            $("#nameMovie").val("");

          } else {

            $("#names").hide();
            $("#annos").show();

            if (tags.length > 0) {

              $("#sugerir").removeAttr("disabled"); 

            }

          }

        });

        $("#fileMovies").change(function() {

          activatePreProcess();

        });

        $("#fileRatings").change(function() {

          activatePreProcess();

        });

        $("#fileLinks").change(function() {

          activatePreProcess();

        });

        function activatePreProcess() {

          var fileMovies = $("#fileMovies").val();
          var fileRatings = $("#fileRatings").val();
          var fileLinks = $("#fileLinks").val();

          if (fileMovies && fileRatings && fileLinks) {

            $("#preProcess").removeAttr("disabled");    
    
          } else {

            $("#preProcess").attr("disabled", true);

          }

        }

        $("#sel3").change(function() {

          validateDates();

        });

        $("#sel4").change(function() {

          validateDates();

        });

        function validateDates() {

          var desde = $("#sel3").val();
          var hasta = $("#sel4").val();

          if (desde > hasta) {

            $("#sel4").val($("#sel3").val());

          }

          if (desde == 1902) {

            $("#sel4").val(1902);

          }

        }

        $('#nameMovie').bind("change paste keyup", function() {

          if ($('#selFilter').find(":selected").text() == "Título") {

            if (tags.indexOf($("#nameMovie").val()) > -1) {

              $("#sugerir").removeAttr("disabled"); 

            } else {

              $("#sugerir").attr("disabled", true);

            }

          }

        });

      });

    </script>

  </head>
 
  <body>

  <div class="container-fluid">

    <div class="row ">

      <div class="col-md-12">

        <div id="header">

          <h4>
          <div id="caption" class="shiny-text-output"></div>
            <p>Universidad Central de Venezuela</p>
            <p>Escuela de Computación</p>
            <p>Minería de Datos</p>
            <p>José Manuel Alvarez — CI 25038805</p>
            <p>Alvaro Sanabria — CI 20615639</p>
            <p><strong>Proyecto final: </strong>Análisis de Reglas de Asociación</p>
          </h4>

        </div>

      </div>

    </div> 

  </div>

  <div class="container-fluid">
      
    <div class="row">

      <div class="col-md-4">

        <div class="styled-div">

          <div>

            <p><strong>Cargar Dataset de Películas: (Cambiar a botón de bootstrap)</strong></p><br/> 
            <input id="fileMovies" type="file"><br/>
            <input type="checkbox" id="includeheadermovies" checked><p>Incluir cabecera</p><br/> 

          
            <br/><p><strong>Separador: </strong></p><br/> 
            <div id="test" class="form-group shiny-input-radiogroup shiny-input-container ">
              <div class="shiny-options-group">
                <input type="radio" name="test" value="Coma" checked><p>Coma</p><br/> 
                <input type="radio" name="test" value="Puntoycoma"><p>Punto y coma</p><br/> 
                <input type="radio" name="test" value="Tabular"><p>Tabulación</p><br/> 
              </div>
            </div>

            <br/><p><strong>Comillas: </strong></p><br/> 
            <div id="radioquotmovies" class="form-group shiny-input-radiogroup shiny-input-container ">
              <div class="shiny-options-group">
                <input type="radio" name="radioquotmovies" value="simplemovies"><p>Simples</p><br/> 
                <input type="radio" name="radioquotmovies" value="doublemovies" checked><p>Dobles</p><br/> 
                <input type="radio" name="radioquotmovies" value="nonemovies"><p>Ninguna</p><br/> 
              </div>
            </div>
              
            <br/><br/> 

          </div>

        </div>

      </div>

      <div class="col-md-4">

        <div class="styled-div">

          <div>

            <p><strong>Cargar Dataset de Ratings: (Cambiar a botón de bootstrap)</strong></p><br/> 
            <input id="fileRatings" type="file"><br/>
            <input type="checkbox" id="includeheaderratings" checked><p>Incluir cabecera</p><br/> 

          
            <br/><p><strong>Separador: </strong></p><br/> 
            <div id="radioseparatorratings" class="form-group shiny-input-radiogroup shiny-input-container ">
              <div class="shiny-options-group">
                <input type="radio" name="radioseparatorratings" value="commaratings" checked><p>Coma</p><br/> 
                <input type="radio" name="radioseparatorratings" value="semicolonratings"><p>Punto y coma</p><br/> 
                <input type="radio" name="radioseparatorratings" value="tabratings"><p>Tabulación</p><br/> 
              </div>
            </div>

            <br/><p><strong>Comillas: </strong></p><br/> 
            <div id="radioquotratings" class="form-group shiny-input-radiogroup shiny-input-container ">
              <div class="shiny-options-group">
                <input type="radio" name="radioquotratings" value="simpleratings"><p>Simples</p><br/> 
                <input type="radio" name="radioquotratings" value="doubleratings" checked><p>Dobles</p><br/> 
                <input type="radio" name="radioquotratings" value="noneratings"><p>Ninguna</p><br/> 
              </div>
            </div>   
            
            <br/><br/>              

          </div>

        </div>

      </div>

      <div class="col-md-4">

        <div class="styled-div">

          <div>

            <p><strong>Cargar Dataset de Links: (Cambiar a botón de bootstrap)</strong></p><br/> 
            <input id="fileLinks" type="file"><br/>
            <input type="checkbox" id="includeheaderlinks" checked><p>Incluir cabecera</p><br/> 

          
            <br/><p><strong>Separador: </strong></p><br/> 
            <div id="radioseparatorlinks" class="form-group shiny-input-radiogroup shiny-input-container ">
              <div class="shiny-options-group">
                <input type="radio" name="radioseparatorlinks" value="commalinks" checked><p>Coma</p><br/> 
                <input type="radio" name="radioseparatorlinks" value="semicolonlinks"><p>Punto y coma</p><br/> 
                <input type="radio" name="radioseparatorlinks" value="tablinks"><p>Tabulación</p><br/> 
              </div>
            </div>

            <br/><p><strong>Comillas: </strong></p><br/> 
            <div id="radioquotlinks" class="form-group shiny-input-radiogroup shiny-input-container ">
              <div class="shiny-options-group">
                <input type="radio" name="radioquotlinks" value="simplelinks"><p>Simples</p><br/> 
                <input type="radio" name="radioquotlinks" value="doublelinks" checked><p>Dobles</p><br/> 
                <input type="radio" name="radioquotlinks" value="nonelinks"><p>Ninguna</p><br/> 
              </div>
            </div>   
            
            <br/><br/>              

          </div>

        </div>

      </div>

    </div>

    <div class="row">

      <div class="col-md-12">

        <div class="styled-div">

              <button type="button" class="btn btn-primary action-button" id="preProcess" style="width:100%" disabled><h4>¡Pre-procesar y generar reglas!</h4></button>
              <br/><br/><br/>

            </div>

        </div>

    </div>

    <br/>

    <div class="row">

      <div class="col-md-12">

        <div class="styled-div2">

          <button class="btn btn-primary" id="button-rules" style="float:right; margin-right: 15px; margin-top: 5px">Mostrar/Ocultar</button>

          <h4 style="margin-left: 15px"><strong>Reglas de Asociación </strong></h4><br/>

          <div id="rules">

            <div class="row" id="rulesName">

              <div class="col-sm-6">
                
                <div id="plot1" class="shiny-plot-output" style="width: 90%; height: 50%"></div>

              </div>

              <div class="col-sm-6" style="max-height: 500px; margin-left: -50px;">
                
                <div id="plot2" class="shiny-plot-output" style="width: 90%; height: 50%"></div>

              </div>

            </div>

          </div>

        </div>

      </div>

    </div> 

    </br>

    <div class="styled-div2">

    <div class="jumbotron" style="margin-bottom:25px">
      <div class="container text-center">
        <h1>App PelículasSugeridas</h1>      
      </div>
    </div>

    <div class="row">

      <div class="col-md-12">

          <label>Buscar película por: </label>
          <select class="form-control" id="selFilter">
            <option>Título</option>
            <option>Año</option>
          </select><br>

          <div id="names">
            <label>Título: </label>
            <input type="text" class="form-control" id="nameMovie" style="width:100%;"><br>
          </div>

          <div id="annos">
            <div id="fechaIni" style="width:42%; float:left;">
            <label>Desde</label>
            <select class="form-control" id="sel3"></select>
            </div>         

            <div id="fechaFin" style="width:42%; float:left; margin-left:10%; margin-bottom:25px; ">
            <label >Hasta</label>
            <select class="form-control" id="sel4" ></select>
            </div> 
          </div>
         
         
          <button type="button" class="btn btn-primary action-button" style="width:100%" id="sugerir" disabled><h4>Sugerir Película</h4></button>
          
      </div>  <!--Aqui termina el buscador-->

    </div>

    <div class="row" style="margin-left: -60px">
     
      <div class="col-md-12">
      
        <div class="row">
          <div class="col-md-3" style="margin-right: -20px">
            <div class="well">

                <h2><pre id="summary1" class="shiny-text-output"></pre></h2>
                <div id="poster1" class="shiny-html-output"></div>

            </div>
          </div>

          <div class="col-md-3" style="margin-right: -20px">
            <div class="well">

                <h2><pre id="summary2" class="shiny-text-output"></pre></h2>
                <div id="poster2" class="shiny-html-output"></div>

            </div>
          </div>

          <div class="col-md-3" style="margin-right: -20px">
            <div class="well">

                <h2><pre id="summary3" class="shiny-text-output"></pre></h2>
                <div id="poster3" class="shiny-html-output"></div>

            </div>
          </div>


          <div class="col-md-3" style="margin-right: -30px">
            <div class="well">

                <h2><pre id="summary4" class="shiny-text-output"></pre></h2>
                <div id="poster4" class="shiny-html-output"></div>

            </div>
          </div>

        </div>
          
      </div><!--Aqui termina la el col-sm-9-->

  </div>

  </div>

   </div>
   
  </body>

</html>